<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Custom Graphics and Labels • RCy3</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Custom Graphics and Labels">
<meta property="og:description" content="RCy3">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RCy3</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.15.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Cancer-networks-and-data.html">Cancer networks and data</a>
    </li>
    <li>
      <a href="../articles/Custom-Graphics.html">Custom Graphics and Labels</a>
    </li>
    <li>
      <a href="../articles/Cytoscape-and-NDEx.html">Cytoscape and NDEx</a>
    </li>
    <li>
      <a href="../articles/Cytoscape-and-graphNEL.html">Cytoscape and graphNEL</a>
    </li>
    <li>
      <a href="../articles/Cytoscape-and-iGraph.html">Cytoscape and igraph</a>
    </li>
    <li>
      <a href="../articles/Filtering-Networks.html">Filtering Networks</a>
    </li>
    <li>
      <a href="../articles/Group-nodes.html">Group nodes</a>
    </li>
    <li>
      <a href="../articles/Identifier-mapping.html">Identifier mapping</a>
    </li>
    <li>
      <a href="../articles/Importing-data.html">Importing data</a>
    </li>
    <li>
      <a href="../articles/Network-functions-and-visualization.html">Network functions and visualization</a>
    </li>
    <li>
      <a href="../articles/Overview-of-RCy3.html">Overview of RCy3</a>
    </li>
    <li>
      <a href="../articles/Phylogenetic-trees.html">Phylogenetic-trees</a>
    </li>
    <li>
      <a href="../articles/Upgrading-existing-scripts.html">Upgrading existing scripts</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cytoscape/RCy3/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Custom-Graphics_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Custom Graphics and Labels</h1>
                        <h4 class="author">Kristina Hanspers, Alexander Pico</h4>
            
            <h4 class="date">2021-11-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cytoscape/RCy3/blob/master/vignettes/Custom-Graphics.Rmd"><code>vignettes/Custom-Graphics.Rmd</code></a></small>
      <div class="hidden name"><code>Custom-Graphics.Rmd</code></div>

    </div>

    
    
<p>This vignette illustrates how Cytoscape’s Custom Graphics can be used to add graphs, charts and other graphics to node, and how to combine Custom Graphics with the enhancedGraphics app for specialized visualizations.</p>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="st">"RCy3"</span> <span class="op"><a href="https://rdrr.io/pkg/BiocGenerics/man/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span>
    <span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/BiocManager/man/install.html">install</a></span><span class="op">(</span><span class="st">"RCy3"</span><span class="op">)</span>
<span class="op">}</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cytoscape/RCy3">RCy3</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="prerequisites" class="section level1">
<h1 class="hasAnchor">
<a href="#prerequisites" class="anchor"></a>Prerequisites</h1>
<p>In addition to this package (RCy3), you will need:</p>
<ul>
<li>
<strong>Cytoscape 3.7</strong> or greater, which can be downloaded from <a href="https://cytoscape.org/download.html" class="uri">https://cytoscape.org/download.html</a>. Simply follow the installation instructions on screen.</li>
<li>Complete installation wizard</li>
<li>Launch Cytoscape</li>
</ul>
</div>
<div id="open-sample" class="section level1">
<h1 class="hasAnchor">
<a href="#open-sample" class="anchor"></a>Open Sample</h1>
<p>For this tutorial, we will be using the galFiltered sample session file, which includes a yeast network and associated data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/openSession.html">openSession</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div id="set-style-and-node-color" class="section level2">
<h2 class="hasAnchor">
<a href="#set-style-and-node-color" class="anchor"></a>Set style and node color</h2>
<p>First, lets change the style to a simple default and the color of nodes to grey:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/setVisualStyle.html">setVisualStyle</a></span><span class="op">(</span><span class="st">'default'</span><span class="op">)</span>
<span class="fu"><a href="../reference/setNodeColorDefault.html">setNodeColorDefault</a></span><span class="op">(</span><span class="st">'#D8D8D8'</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="custom-graphics" class="section level1">
<h1 class="hasAnchor">
<a href="#custom-graphics" class="anchor"></a>Custom Graphics</h1>
<div id="bar-chart" class="section level2">
<h2 class="hasAnchor">
<a href="#bar-chart" class="anchor"></a>Bar chart</h2>
<p>In this example, we will create a bar chart with the three expression values, gal1RGexp, gal4RGexp and gal80Rexp, available as attributes in the session file.</p>
<p>Create the Custom Graphic:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/setNodeCustomBarChart.html">setNodeCustomBarChart</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gal1RGexp"</span>,<span class="st">"gal4RGexp"</span>,<span class="st">"gal80Rexp"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>There are 4 types of Bar Charts and customizable parameters for colors, size, spacing and orientation.</p>
<p>Position the Bar Chart just below the node. This is an optional step that we are doing here just to make room for subsequent graphics. By specifying both anchors at opposite ends, we can get a lot of space between the node and the graphic.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/setNodeCustomPosition.html">setNodeCustomPosition</a></span><span class="op">(</span>nodeAnchor <span class="op">=</span> <span class="st">"S"</span>, graphicAnchor <span class="op">=</span> <span class="st">"N"</span><span class="op">)</span></code></pre></div>
</div>
<div id="stripes" class="section level2">
<h2 class="hasAnchor">
<a href="#stripes" class="anchor"></a>Stripes</h2>
<p>Next we are going to create stripes of gradient mappings using a horizontal “heatmap”” of the same three data columns and position the heatmap right above the node. For this vignette, we need to also specify the slot number to avoid overwriting the Bar Chart:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/setNodeCustomHeatMapChart.html">setNodeCustomHeatMapChart</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gal1RGexp"</span>,<span class="st">"gal4RGexp"</span>,<span class="st">"gal80Rexp"</span><span class="op">)</span>, slot <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="fu"><a href="../reference/setNodeCustomPosition.html">setNodeCustomPosition</a></span><span class="op">(</span>nodeAnchor <span class="op">=</span> <span class="st">"N"</span>, graphicAnchor <span class="op">=</span> <span class="st">"S"</span>, slot <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
</div>
<div id="pie-chart" class="section level2">
<h2 class="hasAnchor">
<a href="#pie-chart" class="anchor"></a>Pie chart</h2>
<p>Finally, we will create a pie chart with two columns, Radiality and Degree, and place it to the left of the node. Here we’ll use the <em>xOffset</em> parameter to be even more specific about where we want to place the graphic relative to the node.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/setNodeCustomPieChart.html">setNodeCustomPieChart</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Radiality"</span>, <span class="st">"Degree"</span><span class="op">)</span>, slot <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="../reference/setNodeCustomPosition.html">setNodeCustomPosition</a></span><span class="op">(</span>nodeAnchor <span class="op">=</span> <span class="st">"W"</span>, xOffset <span class="op">=</span> <span class="op">-</span><span class="fl">20</span>, slot <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="enhanced-graphics" class="section level1">
<h1 class="hasAnchor">
<a href="#enhanced-graphics" class="anchor"></a>Enhanced Graphics</h1>
<p>The nodes in the network are labeled with the corresponding protein names (yeast), but there is additional text information in the Node Table that could be useful to display as labels on the nodes. We are going to use the enhancedGraphics app to create a second node label for the common yeast gene name.</p>
<p>This involves a new step: Filling a new column with parameters for the enhancedGraphics App. This column is then mapped to a Custom Graphic slot and (optionally) positioned, like in the examples above.</p>
<div id="install-enhancedgraphics" class="section level2">
<h2 class="hasAnchor">
<a href="#install-enhancedgraphics" class="anchor"></a>Install enhancedGraphics</h2>
<p>The enhancedGraphics app is available from the <a href="http://apps.cytoscape.org/apps/enhancedgraphics">Cytoscape App Store</a>. In Cytoscape 3.7 and above, you can install apps from R with the following function:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/installApp.html">installApp</a></span><span class="op">(</span><span class="st">"enhancedGraphics"</span><span class="op">)</span></code></pre></div>
</div>
<div id="define-new-label" class="section level2">
<h2 class="hasAnchor">
<a href="#define-new-label" class="anchor"></a>Define new label</h2>
<p>The new column values have to follow a specific syntax to be recognized by the enhancedGraphics app. Here, for example, is how you set a <strong>label</strong> based on another attribute (e.g., the column called “COMMON”), specifying its size, color, outline and background:</p>
<pre><code>"label: attribute=COMMON labelsize=10 color=red outline=false background=false""</code></pre>
<p><em>For more details on the enhancedGraphics format, <a href="http://www.cgl.ucsf.edu/cytoscape/utilities3/enhancedcg.shtml">see the manual</a>.</em></p>
<p>First, we define a dataframe with two columns: node names (“name”) and the new label (“my second label”):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">all.nodes</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/getAllNodes.html">getAllNodes</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">label.df</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">all.nodes</span>, <span class="st">"label: attribute=COMMON labelsize=10 color=red outline=false background=false"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/BiocGenerics/man/row_colnames.html">colnames</a></span><span class="op">(</span><span class="va">label.df</span><span class="op">)</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span>,<span class="st">"my second label"</span><span class="op">)</span></code></pre></div>
<p>Next, we load this dataframe into the Node Table to create and fill a new column:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/loadTableData.html">loadTableData</a></span><span class="op">(</span><span class="va">label.df</span>, data.key.column <span class="op">=</span> <span class="st">"name"</span>, table.key.column <span class="op">=</span> <span class="st">"name"</span><span class="op">)</span></code></pre></div>
</div>
<div id="map-and-position-label" class="section level2">
<h2 class="hasAnchor">
<a href="#map-and-position-label" class="anchor"></a>Map and position label</h2>
<p>We now have a new column, <em>my second label</em>, that we can use for the mapping. This mapping does not come with a custom helper function, se we are going to use two alternative functions to prepare the passthrough mapping property and then update our visual style with the new mapping:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">label.map</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/mapVisualProperty.html">mapVisualProperty</a></span><span class="op">(</span><span class="st">'node customgraphics 4'</span>,<span class="st">'my second label'</span>,<span class="st">'p'</span><span class="op">)</span>
<span class="fu"><a href="../reference/updateStyleMapping.html">updateStyleMapping</a></span><span class="op">(</span><span class="st">'default'</span>, <span class="va">label.map</span><span class="op">)</span></code></pre></div>
<p><em>Note: the custom graphic slot number is actulally part of the property’s name.</em></p>
<p>Finally, we position the new label in the upper right corner:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/setNodeCustomPosition.html">setNodeCustomPosition</a></span><span class="op">(</span>nodeAnchor <span class="op">=</span> <span class="st">"E"</span>, graphicAnchor <span class="op">=</span> <span class="st">"C"</span>, xOffset <span class="op">=</span> <span class="fl">10</span>, slot <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alex Pico, Tanja Muetze, Paul Shannon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
